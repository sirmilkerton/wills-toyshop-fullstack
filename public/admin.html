<!doctype html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Admin — Will’s Toy Shop</title>
  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
<header class="header">
  <div class="container header__inner">
    <a class="brand" href="/"><span class="brand__mark"></span>Will’s Toy Shop</a>
    <nav class="nav" aria-label="Primary">
      <a href="/">Home</a>
      <a href="/shop">Shop</a>
      <a href="/shipping.html">Shipping</a>
      <a href="/store.html">Store</a>
      <a href="/admin" aria-current="page">Admin</a>
    </nav>
    <div class="actions">
      <button class="btn" id="themeToggle" type="button"><span id="themeLabel">Light</span></button>
      <button class="btn" data-open-cart id="openCart" type="button">Cart <span class="pill" id="cartCount">0</span></button>
    </div>
  </div>
</header>
<!-- Cart drawer -->
<div class="drawerBackdrop" id="drawerBackdrop"></div>
<aside class="cartDrawer" id="cartDrawer" aria-label="Cart drawer">
  <div class="drawerHead">
    <h3>Your cart</h3>
    <button class="x" id="drawerClose" aria-label="Close">×</button>
  </div>
  <div class="drawerBody" id="drawerBody"></div>
  <div class="drawerFoot">
    <div class="miniRow"><span>Subtotal</span><span id="drawerSubtotal">£0.00</span></div>
    <a class="btn btn--primary" href="/cart">Go to cart</a>
    <a class="btn" href="/shop">Continue shopping</a>
  </div>
</aside>
<!-- Quick view modal -->
<div class="modalBackdrop" id="modalBackdrop"></div>
<div class="modal" id="quickModal" role="dialog" aria-modal="true" aria-label="Quick view">
  <div class="modalGrid">
    <div class="modalImg" id="qmImg"></div>
    <div class="modalBody">
      <div class="modalTop">
        <div>
          <div class="smallNote">Quick view</div>
          <h3 class="title" id="qmTitle" style="font-size:20px;margin:6px 0 0;"></h3>
        </div>
        <button class="x" id="qmClose" aria-label="Close">×</button>
      </div>
      <p class="desc" id="qmDesc" style="min-height:auto;"></p>
      <div class="row" style="margin-top:12px;">
        <div class="price" id="qmPrice" style="font-size:18px;"></div>
        <button class="btn btn--primary" id="qmAdd" type="button">Add to cart</button>
      </div>
      <div class="rule"></div>
      <a class="btn" id="qmView" href="/product">View details</a>
    </div>
  </div>
</div>

<main class="page">
  <div class="container">
    <div class="sectionHead">
      <h2>Admin</h2>
      <p>Sign in to add/edit products. Images upload to the server.</p>
    </div>

    <div class="card panel" id="authPanel">
      <h3 class="title">Sign in</h3>
      <p class="desc">Use the credentials in <code>.env</code> (ADMIN_EMAIL / ADMIN_PASSWORD).</p>

      <form id="loginForm" style="display:grid; gap:10px; max-width:520px;">
        <input class="select" id="email" placeholder="Email" />
        <input class="select" id="password" type="password" placeholder="Password" />
        <button class="btn btn--primary" type="submit">Login</button>
        <div id="loginErr" class="smallNote" style="color: color-mix(in oklab, red 70%, var(--fg));"></div>
      </form>
    </div>

    <div class="card panel" id="adminPanel" hidden>
      <div class="panelTop">
        <h3>Signed in as <span id="who"></span></h3>
        <button class="btn" id="logout" type="button">Logout</button>
      </div>

      <div class="rule"></div>

      <h3 id="formTitle" class="title">Add product</h3>
      <form id="productForm" style="display:grid; gap:10px;">
        <input id="pid" type="hidden" />
        <div class="shopLayout" style="grid-template-columns: 1fr 1fr; gap:10px;">
          <input class="select" id="pname" placeholder="Name" required />
          <input class="select" id="pcat" placeholder="Category (e.g., Lego)" />
        </div>
        <textarea class="select" id="pdesc" placeholder="Description" rows="3"></textarea>

        <div class="shopLayout" style="grid-template-columns: 1fr 1fr 1fr; gap:10px;">
          <input class="select" id="pprice" placeholder="Price (e.g., 14.99)" />
          <input class="select" id="psale" placeholder="Sale price (optional)" />
          <input class="select" id="pstock" placeholder="Stock (e.g., 12)" />
        </div>

        <div class="shopLayout" style="grid-template-columns: 1fr 1fr; gap:10px;">
          <input class="select" id="pimgurl" placeholder="Image URL (optional)" />
          <input class="select" id="pimgfile" type="file" accept="image/*" />
        </div>

        <div class="chips">
          <label class="chip"><input id="pnew" type="checkbox" /> New</label>
          <label class="chip"><input id="pbest" type="checkbox" /> Best seller</label>
          <label class="chip"><input id="psaleFlag" type="checkbox" /> On sale</label>
        </div>

        <div style="display:flex; gap:10px; flex-wrap:wrap;">
          <button class="btn btn--primary" type="submit">Save</button>
          <button class="btn" id="resetForm" type="button">Reset</button>
          <div id="saveErr" class="smallNote" style="color: color-mix(in oklab, red 70%, var(--fg));"></div>
        </div>
      </form>

      <div class="rule"></div>

      <h3 class="title">Products</h3>
      <div style="overflow:auto;">
        <table style="width:100%; border-collapse:collapse;">
          <thead>
            <tr style="text-align:left; color: var(--muted);">
              <th style="padding:10px 6px;">ID</th>
              <th style="padding:10px 6px;">Name</th>
              <th style="padding:10px 6px;">Category</th>
              <th style="padding:10px 6px;">Price</th>
              <th style="padding:10px 6px;">Stock</th>
              <th style="padding:10px 6px;">Actions</th>
            </tr>
          </thead>
          <tbody id="prodTable"></tbody>
        </table>
      </div>
    </div>
  </div>
</main>
<footer class="footer">
  <div class="container footerRow">
    <div>Admin</div>
    <div><a class="btn" href="/shop">View storefront</a></div>
  </div>
</footer>
<script src="/admin.js"></script>
<script src="/app.js"></script>
</body>
</html>
